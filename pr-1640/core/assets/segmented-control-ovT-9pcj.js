import{r as Z}from"./lit-element-BoQqPHl6.js";import{n as b,g as H,G as J,h as k,r as K}from"./gds-element-CNG85WuL.js";import{a as P}from"./query-p8xgzTDt.js";import{n as F}from"./when-BxLAFfhK.js";import{m as R}from"./runtime-CMQcyTl6.js";import{T as Q}from"./transitional-styles-BdworihU.js";import{w as st}from"./watch-tFciLXSI.js";import{r as it}from"./resize-observer-B9k8v2TZ.js";import{t as Y}from"./tokens.style-DuOE18tp.js";import"./chevron-right-B_TEpnY3.js";const nt=":host{display:flex;transition:.2s;z-index:1}button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border-radius:calc(infinity * 1px);border-width:0;color:var(--gds-sys-color-content-content);cursor:pointer;flex-grow:1;flex-shrink:0;font-family:inherit;font-size:inherit;overflow:hidden;padding:0 1rem;text-align:center;text-overflow:ellipsis;white-space:nowrap;width:100%}button:disabled{cursor:not-allowed;opacity:.5}@media (pointer: fine){button:hover{background-color:color-mix(in srgb,var(--gds-sys-color-state-layers-state-black-dim1),transparent)}button:hover:disabled{background-color:transparent}}button:focus-visible{outline:2px solid #000;outline-offset:-2px}";var rt=Object.defineProperty,at=Object.getOwnPropertyDescriptor,B=(t,e,i,h)=>{for(var r=h>1?void 0:h?at(e,i):e,p=t.length-1,o;p>=0;p--)(o=t[p])&&(r=(h?o(e,i,r):o(r))||r);return h&&r&&rt(e,i,r),r};let _=class extends J{constructor(){super(...arguments),this.selected=!1,this.disabled=!1}connectedCallback(){super.connectedCallback(),Q.instance.apply(this,"gds-segmented"),this.setAttribute("role","listitem")}render(){return k`<button
      aria-current=${String(this.selected)}
      ?disabled="${this.disabled}"
    >
      <slot></slot>
    </button>`}};_.styles=[...Y,Z(nt)];B([b({type:Boolean,reflect:!0})],_.prototype,"selected",2);B([b()],_.prototype,"value",2);B([b({type:Boolean,reflect:!0})],_.prototype,"disabled",2);_=B([H("gds-segment")],_);const ot=':host{background-color:var(--gds-sys-color-container-container-dim1);border:.25rem solid var(--gds-sys-color-container-container-dim1);border-radius:calc(infinity * 1px);box-sizing:border-box;contain:layout;display:inline-flex;gap:.25rem;height:3rem;max-width:100%;overflow:hidden}:host([size="small"]){height:2.5rem}#track{box-sizing:border-box;display:flex;flex-grow:0;flex-shrink:1;overflow:hidden;position:relative;width:100%}#segments{box-sizing:border-box;display:inline-flex;gap:.25rem;position:relative;transition:.2s;z-index:1}#btn-prev,#btn-next{align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;aspect-ratio:1;background-color:var(--gds-sys-color-container-container-dim1);border-radius:calc(infinity * 1px);border-width:0;color:var(--gds-sys-color-content-content);cursor:pointer;display:flex;font-size:1rem;height:100%;justify-content:center;width:2.5rem}@media (pointer: fine){#btn-prev:hover,#btn-next:hover{background-color:color-mix(in srgb,var(--gds-sys-color-state-layers-state-black-dim1),var(--gds-sys-color-container-container-dim1))}}:host([size="small"]) #btn-prev,:host([size="small"]) #btn-next{width:2rem}::slotted(*){flex-grow:1;flex-shrink:0;z-index:1}#indicator{background-color:var(--gds-sys-color-container-container-bright);border-radius:calc(infinity * 1px);height:100%;left:0;position:absolute;transition:transform .2s,width .2s;z-index:0}';var lt=Object.defineProperty,ht=Object.getOwnPropertyDescriptor,j=t=>{throw TypeError(t)},d=(t,e,i,h)=>{for(var r=h>1?void 0:h?ht(e,i):e,p=t.length-1,o;p>=0;p--)(o=t[p])&&(r=(h?o(e,i,r):o(r))||r);return h&&r&&lt(e,i,r),r},U=(t,e,i)=>e.has(t)||j("Cannot "+i),s=(t,e,i)=>(U(t,e,"read from private field"),i?i.call(t):e.get(t)),n=(t,e,i)=>e.has(t)?j("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),a=(t,e,i,h)=>(U(t,e,"write to private field"),e.set(t,i),i),ct=(t,e,i)=>(U(t,e,"access private method"),i),q=(t,e,i,h)=>({set _(r){a(t,e,r)},get _(){return s(t,e,h)}}),u,l,S,w,f,m,W,M,v,T,$,C,D,g,z,G,tt,N,L,V,I,X,A;const dt={small:36,medium:44},x=t=>t?0:4;let c=class extends J{constructor(){super(...arguments),n(this,G),this.segMinWidth=100,this.size="medium",n(this,u),this._showPrevButton=!1,this._showNextButton=!1,n(this,l,0),n(this,S,0),n(this,w,0),n(this,f,0),n(this,m,0),n(this,W,0),n(this,M,0),n(this,v,!1),n(this,T,t=>{a(this,W,t.clientX),a(this,M,s(this,f)),a(this,v,!0)}),n(this,$,t=>{if(!s(this,v))return;t.preventDefault();const e=t.clientX-s(this,W);if(!(Math.abs(e)<5))try{this._elSegments.hasPointerCapture(t.pointerId)||this._elSegments.setPointerCapture(t.pointerId),a(this,f,s(this,M)+e),s(this,z).call(this)}catch{}}),n(this,C,t=>{if(s(this,v)){a(this,v,!1);try{this._elSegments.releasePointerCapture(t.pointerId),s(this,D).call(this)}catch{}}}),n(this,D,()=>{a(this,l,Math.round(-s(this,f)/s(this,S))),s(this,g).call(this)}),n(this,g,(t=!1)=>{const e=()=>{const o=this.segments.length,y=this._elTrack.offsetWidth;if(y/o>this.segMinWidth)return{count:o,segmentWidth:(y-x(this._isUsingTransitionalStyles)*(o-1))/o};const E=this.offsetWidth-dt[this.size]*2,O=Math.floor(E/this.segMinWidth),et=(y-x(this._isUsingTransitionalStyles)*(O-1))/O;return{count:O,segmentWidth:et}},{count:i}=e();t&&(s(this,m)>=s(this,l)+i&&a(this,l,s(this,m)-i+1),s(this,m)<s(this,l)&&a(this,l,s(this,m)));const h=this.segments.length-i,r=s(this,l)>=h,p=s(this,l)<=0;r&&a(this,l,h),p&&a(this,l,0),s(this,V).call(this,i),this.updateComplete.then(()=>{const{segmentWidth:o,count:y}=e();this.segments.forEach(E=>{E.style.width=o+"px"}),a(this,f,-s(this,l)*o-x(this._isUsingTransitionalStyles)*s(this,l)),s(this,z).call(this),a(this,S,o),a(this,w,o),s(this,I).call(this)})}),n(this,z,()=>{window.requestAnimationFrame(()=>{this._elSegments.style.transform=`translateX(${s(this,f)}px)`})}),n(this,N,()=>{q(this,l)._--,s(this,g).call(this)}),n(this,L,()=>{q(this,l)._++,s(this,g).call(this)}),n(this,V,t=>{this._showPrevButton=s(this,l)>0,this._showNextButton=s(this,l)<this.segments.length-t}),n(this,I,()=>{const t=this.segments.find(e=>e.selected);if(t){const e=this.segments.indexOf(t),i=e*s(this,w)+x(this._isUsingTransitionalStyles)*e;this._elIndicator.style.transform=`translateX(${i}px)`,this._elIndicator.style.width=`${s(this,w)}px`}else this._elIndicator.style.transform="translateX(-100%)",this._elIndicator.style.width="0px"}),n(this,X,t=>{const e=this.segments.find(i=>i===t.target||i.contains(t.target));e&&(this.segments.forEach(i=>i.selected=!1),e.selected=!0,a(this,u,e.value),s(this,I).call(this),this.dispatchEvent(new CustomEvent("change",{detail:{segment:e},bubbles:!0,composed:!0})))}),n(this,A,()=>{s(this,u)&&this.updateComplete.then(()=>{const t=this.segments.find(e=>e.value===s(this,u));t&&(this.segments.forEach(e=>e.selected=!1),t.selected=!0,a(this,m,this.segments.indexOf(t)),s(this,g).call(this,!0))})})}get value(){return s(this,u)}set value(t){a(this,u,t),s(this,A).call(this)}get segments(){return this._elSlot?this._elSlot.assignedElements():[]}connectedCallback(){super.connectedCallback(),Q.instance.apply(this,"gds-segmented-control"),this.addEventListener("focusin",t=>{t.target instanceof _&&(a(this,m,this.segments.indexOf(t.target)),s(this,g).call(this,!0))})}render(){return k`${F(this._showPrevButton,()=>k`<button
            id="btn-prev"
            @click=${s(this,N)}
            aria-label=${R("Scroll right")}
          >
            <gds-icon-chevron-left />
          </button>`)}
      <div
        id="track"
        @scroll=${()=>{this._elTrack.scrollLeft=0}}
      >
        <div
          id="segments"
          @pointerdown=${s(this,T)}
          @pointermove=${s(this,$)}
          @touchmove=${s(this,$)}
          @pointerup=${s(this,C)}
          @pointercancel=${s(this,C)}
          role="list"
        >
          <slot
            gds-allow="gds-segment"
            @click=${s(this,X)}
            @slotchange=${ct(this,G,tt)}
            role="none"
          ></slot>
          <div id="indicator" role="none"></div>
        </div>
      </div>
      ${F(this._showNextButton,()=>k`<button
            id="btn-next"
            @click=${s(this,L)}
            aria-label=${R("Scroll right")}
          >
            <gds-icon-chevron-right />
          </button>`)}`}_recalculateMinWidth(){this.updateComplete.then(()=>s(this,g).call(this))}};u=new WeakMap;l=new WeakMap;S=new WeakMap;w=new WeakMap;f=new WeakMap;m=new WeakMap;W=new WeakMap;M=new WeakMap;v=new WeakMap;T=new WeakMap;$=new WeakMap;C=new WeakMap;D=new WeakMap;g=new WeakMap;z=new WeakMap;G=new WeakSet;tt=function(){var e;const t=(e=this.segments.find(i=>i.selected))==null?void 0:e.value;t&&a(this,u,t),s(this,g).call(this)};N=new WeakMap;L=new WeakMap;V=new WeakMap;I=new WeakMap;X=new WeakMap;A=new WeakMap;c.styles=[Y,Z(ot)];d([b({type:Number,attribute:"seg-min-width"})],c.prototype,"segMinWidth",2);d([b({reflect:!0})],c.prototype,"size",2);d([b()],c.prototype,"value",1);d([P("slot")],c.prototype,"_elSlot",2);d([P("#indicator")],c.prototype,"_elIndicator",2);d([P("#track")],c.prototype,"_elTrack",2);d([P("#segments")],c.prototype,"_elSegments",2);d([K()],c.prototype,"_showPrevButton",2);d([K()],c.prototype,"_showNextButton",2);d([it(),st("segMinWidth")],c.prototype,"_recalculateMinWidth",1);c=d([H("gds-segmented-control")],c);
