import{i as Zt,r as te,x as ee}from"./lit-element-2a5e401f.js";import{n as L,r as xt,g as ie,G as ne}from"./gds-element-24e794df.js";import{a as _t}from"./query-b9d3c2af.js";import{e as oe}from"./class-map-43969d56.js";import{m as se}from"./lit-localize-87611c26.js";import{w as Q}from"./watch-c4961afe.js";import{T as re}from"./transitional-styles-7da980bd.js";import"./cross-small-3fee855f.js";function le(t){return(e,i,n)=>{const o=window.matchMedia(t),s=e.connectedCallback,r=e.disconnectedCallback;e.connectedCallback=function(){var a;s==null||s.call(this);const l=c=>{var h;(h=n.value)==null||h.call(this,c.matches)};o.addEventListener("change",l),this.disconnectedCallback=function(){r==null||r.call(this),o.removeEventListener("change",l)},(a=n.value)==null||a.call(this,o.matches)}}}const dt=Math.min,I=Math.max,ot=Math.round,Z=Math.floor,S=t=>({x:t,y:t}),ae={left:"right",right:"left",bottom:"top",top:"bottom"},ce={start:"end",end:"start"};function Et(t,e){return typeof t=="function"?t(e):t}function K(t){return t.split("-")[0]}function at(t){return t.split("-")[1]}function fe(t){return t==="x"?"y":"x"}function Nt(t){return t==="y"?"height":"width"}function Ct(t){return["top","bottom"].includes(K(t))?"y":"x"}function Ft(t){return fe(Ct(t))}function he(t,e,i){i===void 0&&(i=!1);const n=at(t),o=Ft(t),s=Nt(o);let r=o==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(r=st(r)),[r,st(r)]}function ue(t){const e=st(t);return[pt(t),e,pt(e)]}function pt(t){return t.replace(/start|end/g,e=>ce[e])}function de(t,e,i){const n=["left","right"],o=["right","left"],s=["top","bottom"],r=["bottom","top"];switch(t){case"top":case"bottom":return i?e?o:n:e?n:o;case"left":case"right":return e?s:r;default:return[]}}function pe(t,e,i,n){const o=at(t);let s=de(K(t),i==="start",n);return o&&(s=s.map(r=>r+"-"+o),e&&(s=s.concat(s.map(pt)))),s}function st(t){return t.replace(/left|right|bottom|top/g,e=>ae[e])}function ge(t){return{top:0,right:0,bottom:0,left:0,...t}}function me(t){return typeof t!="number"?ge(t):{top:t,right:t,bottom:t,left:t}}function rt(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function St(t,e,i){let{reference:n,floating:o}=t;const s=Ct(e),r=Ft(e),l=Nt(r),a=K(e),c=s==="y",h=n.x+n.width/2-o.width/2,f=n.y+n.height/2-o.height/2,g=n[l]/2-o[l]/2;let u;switch(a){case"top":u={x:h,y:n.y-o.height};break;case"bottom":u={x:h,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:f};break;case"left":u={x:n.x-o.width,y:f};break;default:u={x:n.x,y:n.y}}switch(at(e)){case"start":u[r]-=g*(i&&c?-1:1);break;case"end":u[r]+=g*(i&&c?-1:1);break}return u}const ye=async(t,e,i)=>{const{placement:n="bottom",strategy:o="absolute",middleware:s=[],platform:r}=i,l=s.filter(Boolean),a=await(r.isRTL==null?void 0:r.isRTL(e));let c=await r.getElementRects({reference:t,floating:e,strategy:o}),{x:h,y:f}=St(c,n,a),g=n,u={},d=0;for(let p=0;p<l.length;p++){const{name:E,fn:m}=l[p],{x:v,y:x,data:R,reset:_}=await m({x:h,y:f,initialPlacement:n,placement:g,strategy:o,middlewareData:u,rects:c,platform:r,elements:{reference:t,floating:e}});h=v??h,f=x??f,u={...u,[E]:{...u[E],...R}},_&&d<=50&&(d++,typeof _=="object"&&(_.placement&&(g=_.placement),_.rects&&(c=_.rects===!0?await r.getElementRects({reference:t,floating:e,strategy:o}):_.rects),{x:h,y:f}=St(c,g,a)),p=-1)}return{x:h,y:f,placement:g,strategy:o,middlewareData:u}};async function we(t,e){var i;e===void 0&&(e={});const{x:n,y:o,platform:s,rects:r,elements:l,strategy:a}=t,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:g=!1,padding:u=0}=Et(e,t),d=me(u),E=l[g?f==="floating"?"reference":"floating":f],m=rt(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(E)))==null||i?E:E.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:c,rootBoundary:h,strategy:a})),v=f==="floating"?{...r.floating,x:n,y:o}:r.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),R=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},_=rt(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:x,strategy:a}):v);return{top:(m.top-_.top+d.top)/R.y,bottom:(_.bottom-m.bottom+d.bottom)/R.y,left:(m.left-_.left+d.left)/R.x,right:(_.right-m.right+d.right)/R.x}}const be=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,n;const{placement:o,middlewareData:s,rects:r,initialPlacement:l,platform:a,elements:c}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:g,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:p=!0,...E}=Et(t,e);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const m=K(o),v=K(l)===l,x=await(a.isRTL==null?void 0:a.isRTL(c.floating)),R=g||(v||!p?[st(l)]:ue(l));!g&&d!=="none"&&R.push(...pe(l,p,d,x));const _=[l,...R],P=await we(e,E),J=[];let Y=((n=s.flip)==null?void 0:n.overflows)||[];if(h&&J.push(P[m]),f){const V=he(o,r,x);J.push(P[V[0]],P[V[1]])}if(Y=[...Y,{placement:o,overflows:J}],!J.every(V=>V<=0)){var kt,Mt;const V=(((kt=s.flip)==null?void 0:kt.index)||0)+1,Dt=_[V];if(Dt)return{data:{index:V,overflows:Y},reset:{placement:Dt}};let U=(Mt=Y.filter(H=>H.overflows[0]<=0).sort((H,$)=>H.overflows[1]-$.overflows[1])[0])==null?void 0:Mt.placement;if(!U)switch(u){case"bestFit":{var Ot;const H=(Ot=Y.map($=>[$.placement,$.overflows.filter(G=>G>0).reduce((G,Jt)=>G+Jt,0)]).sort(($,G)=>$[1]-G[1])[0])==null?void 0:Ot[0];H&&(U=H);break}case"initialPlacement":U=l;break}if(o!==U)return{reset:{placement:U}}}return{}}}};async function ve(t,e){const{placement:i,platform:n,elements:o}=t,s=await(n.isRTL==null?void 0:n.isRTL(o.floating)),r=K(i),l=at(i),a=Ct(i)==="y",c=["left","top"].includes(r)?-1:1,h=s&&a?-1:1,f=Et(e,t);let{mainAxis:g,crossAxis:u,alignmentAxis:d}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return l&&typeof d=="number"&&(u=l==="end"?d*-1:d),a?{x:u*h,y:g*c}:{x:g*c,y:u*h}}const xe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,n;const{x:o,y:s,placement:r,middlewareData:l}=e,a=await ve(e,t);return r===((i=l.offset)==null?void 0:i.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:o+a.x,y:s+a.y,data:{...a,placement:r}}}}};function W(t){return Bt(t)?(t.nodeName||"").toLowerCase():"#document"}function T(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function O(t){var e;return(e=(Bt(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Bt(t){return t instanceof Node||t instanceof T(t).Node}function M(t){return t instanceof Element||t instanceof T(t).Element}function k(t){return t instanceof HTMLElement||t instanceof T(t).HTMLElement}function Wt(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof T(t).ShadowRoot}function j(t){const{overflow:e,overflowX:i,overflowY:n,display:o}=A(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+i)&&!["inline","contents"].includes(o)}function _e(t){return["table","td","th"].includes(W(t))}function Tt(t){const e=Rt(),i=A(t);return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(i.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(i.contain||"").includes(n))}function Ht(t){let e=X(t);for(;k(e)&&!ct(e);){if(Tt(e))return e;e=X(e)}return null}function Rt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ct(t){return["html","body","#document"].includes(W(t))}function A(t){return T(t).getComputedStyle(t)}function ft(t){return M(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function X(t){if(W(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Wt(t)&&t.host||O(t);return Wt(e)?e.host:e}function $t(t){const e=X(t);return ct(e)?t.ownerDocument?t.ownerDocument.body:t.body:k(e)&&j(e)?e:$t(e)}function q(t,e,i){var n;e===void 0&&(e=[]),i===void 0&&(i=!0);const o=$t(t),s=o===((n=t.ownerDocument)==null?void 0:n.body),r=T(o);return s?e.concat(r,r.visualViewport||[],j(o)?o:[],r.frameElement&&i?q(r.frameElement):[]):e.concat(o,q(o,[],i))}function It(t){const e=A(t);let i=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const o=k(t),s=o?t.offsetWidth:i,r=o?t.offsetHeight:n,l=ot(i)!==s||ot(n)!==r;return l&&(i=s,n=r),{width:i,height:n,$:l}}function At(t){return M(t)?t:t.contextElement}function z(t){const e=At(t);if(!k(e))return S(1);const i=e.getBoundingClientRect(),{width:n,height:o,$:s}=It(e);let r=(s?ot(i.width):i.width)/n,l=(s?ot(i.height):i.height)/o;return(!r||!Number.isFinite(r))&&(r=1),(!l||!Number.isFinite(l))&&(l=1),{x:r,y:l}}const Ee=S(0);function zt(t){const e=T(t);return!Rt()||!e.visualViewport?Ee:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Ce(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==T(t)?!1:e}function B(t,e,i,n){e===void 0&&(e=!1),i===void 0&&(i=!1);const o=t.getBoundingClientRect(),s=At(t);let r=S(1);e&&(n?M(n)&&(r=z(n)):r=z(t));const l=Ce(s,i,n)?zt(s):S(0);let a=(o.left+l.x)/r.x,c=(o.top+l.y)/r.y,h=o.width/r.x,f=o.height/r.y;if(s){const g=T(s),u=n&&M(n)?T(n):n;let d=g.frameElement;for(;d&&n&&u!==g;){const p=z(d),E=d.getBoundingClientRect(),m=A(d),v=E.left+(d.clientLeft+parseFloat(m.paddingLeft))*p.x,x=E.top+(d.clientTop+parseFloat(m.paddingTop))*p.y;a*=p.x,c*=p.y,h*=p.x,f*=p.y,a+=v,c+=x,d=T(d).frameElement}}return rt({width:h,height:f,x:a,y:c})}const Te=[":popover-open",":modal"];function Kt(t){let e=!1,i=0,n=0;function o(s){try{e=e||t.matches(s)}catch{}}if(Te.forEach(s=>{o(s)}),e){const s=Ht(t);if(s){const r=s.getBoundingClientRect();i=r.x,n=r.y}}return[e,i,n]}function Re(t){let{elements:e,rect:i,offsetParent:n,strategy:o}=t;const s=O(n),[r]=e?Kt(e.floating):[!1];if(n===s||r)return i;let l={scrollLeft:0,scrollTop:0},a=S(1);const c=S(0),h=k(n);if((h||!h&&o!=="fixed")&&((W(n)!=="body"||j(s))&&(l=ft(n)),k(n))){const f=B(n);a=z(n),c.x=f.x+n.clientLeft,c.y=f.y+n.clientTop}return{width:i.width*a.x,height:i.height*a.y,x:i.x*a.x-l.scrollLeft*a.x+c.x,y:i.y*a.y-l.scrollTop*a.y+c.y}}function Ae(t){return Array.from(t.getClientRects())}function Xt(t){return B(O(t)).left+ft(t).scrollLeft}function Le(t){const e=O(t),i=ft(t),n=t.ownerDocument.body,o=I(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=I(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let r=-i.scrollLeft+Xt(t);const l=-i.scrollTop;return A(n).direction==="rtl"&&(r+=I(e.clientWidth,n.clientWidth)-o),{width:o,height:s,x:r,y:l}}function ke(t,e){const i=T(t),n=O(t),o=i.visualViewport;let s=n.clientWidth,r=n.clientHeight,l=0,a=0;if(o){s=o.width,r=o.height;const c=Rt();(!c||c&&e==="fixed")&&(l=o.offsetLeft,a=o.offsetTop)}return{width:s,height:r,x:l,y:a}}function Me(t,e){const i=B(t,!0,e==="fixed"),n=i.top+t.clientTop,o=i.left+t.clientLeft,s=k(t)?z(t):S(1),r=t.clientWidth*s.x,l=t.clientHeight*s.y,a=o*s.x,c=n*s.y;return{width:r,height:l,x:a,y:c}}function Pt(t,e,i){let n;if(e==="viewport")n=ke(t,i);else if(e==="document")n=Le(O(t));else if(M(e))n=Me(e,i);else{const o=zt(t);n={...e,x:e.x-o.x,y:e.y-o.y}}return rt(n)}function Yt(t,e){const i=X(t);return i===e||!M(i)||ct(i)?!1:A(i).position==="fixed"||Yt(i,e)}function Oe(t,e){const i=e.get(t);if(i)return i;let n=q(t,[],!1).filter(l=>M(l)&&W(l)!=="body"),o=null;const s=A(t).position==="fixed";let r=s?X(t):t;for(;M(r)&&!ct(r);){const l=A(r),a=Tt(r);!a&&l.position==="fixed"&&(o=null),(s?!a&&!o:!a&&l.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||j(r)&&!a&&Yt(t,r))?n=n.filter(h=>h!==r):o=l,r=X(r)}return e.set(t,n),n}function De(t){let{element:e,boundary:i,rootBoundary:n,strategy:o}=t;const r=[...i==="clippingAncestors"?Oe(e,this._c):[].concat(i),n],l=r[0],a=r.reduce((c,h)=>{const f=Pt(e,h,o);return c.top=I(f.top,c.top),c.right=dt(f.right,c.right),c.bottom=dt(f.bottom,c.bottom),c.left=I(f.left,c.left),c},Pt(e,l,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Se(t){const{width:e,height:i}=It(t);return{width:e,height:i}}function We(t,e,i,n){const o=k(e),s=O(e),r=i==="fixed",l=B(t,!0,r,e);let a={scrollLeft:0,scrollTop:0};const c=S(0);if(o||!o&&!r)if((W(e)!=="body"||j(s))&&(a=ft(e)),o){const p=B(e,!0,r,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=Xt(s));let h=l.left+a.scrollLeft-c.x,f=l.top+a.scrollTop-c.y;const[g,u,d]=Kt(n);return g&&(h+=u,f+=d,o&&(h+=e.clientLeft,f+=e.clientTop)),{x:h,y:f,width:l.width,height:l.height}}function Vt(t,e){return!k(t)||A(t).position==="fixed"?null:e?e(t):t.offsetParent}function Ut(t,e){const i=T(t);if(!k(t))return i;let n=Vt(t,e);for(;n&&_e(n)&&A(n).position==="static";)n=Vt(n,e);return n&&(W(n)==="html"||W(n)==="body"&&A(n).position==="static"&&!Tt(n))?i:n||Ht(t)||i}const Pe=async function(t){const e=this.getOffsetParent||Ut,i=this.getDimensions;return{reference:We(t.reference,await e(t.floating),t.strategy,t.floating),floating:{x:0,y:0,...await i(t.floating)}}};function Ve(t){return A(t).direction==="rtl"}const Ne={convertOffsetParentRelativeRectToViewportRelativeRect:Re,getDocumentElement:O,getClippingRect:De,getOffsetParent:Ut,getElementRects:Pe,getClientRects:Ae,getDimensions:Se,getScale:z,isElement:M,isRTL:Ve};function Fe(t,e){let i=null,n;const o=O(t);function s(){var l;clearTimeout(n),(l=i)==null||l.disconnect(),i=null}function r(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),s();const{left:c,top:h,width:f,height:g}=t.getBoundingClientRect();if(l||e(),!f||!g)return;const u=Z(h),d=Z(o.clientWidth-(c+f)),p=Z(o.clientHeight-(h+g)),E=Z(c),v={rootMargin:-u+"px "+-d+"px "+-p+"px "+-E+"px",threshold:I(0,dt(1,a))||1};let x=!0;function R(_){const P=_[0].intersectionRatio;if(P!==a){if(!x)return r();P?r(!1,P):n=setTimeout(()=>{r(!1,1e-7)},100)}x=!1}try{i=new IntersectionObserver(R,{...v,root:o.ownerDocument})}catch{i=new IntersectionObserver(R,v)}i.observe(t)}return r(!0),s}function Be(t,e,i,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=n,c=At(t),h=o||s?[...c?q(c):[],...q(e)]:[];h.forEach(m=>{o&&m.addEventListener("scroll",i,{passive:!0}),s&&m.addEventListener("resize",i)});const f=c&&l?Fe(c,i):null;let g=-1,u=null;r&&(u=new ResizeObserver(m=>{let[v]=m;v&&v.target===c&&u&&(u.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var x;(x=u)==null||x.observe(e)})),i()}),c&&!a&&u.observe(c),u.observe(e));let d,p=a?B(t):null;a&&E();function E(){const m=B(t);p&&(m.x!==p.x||m.y!==p.y||m.width!==p.width||m.height!==p.height)&&i(),p=m,d=requestAnimationFrame(E)}return i(),()=>{var m;h.forEach(v=>{o&&v.removeEventListener("scroll",i),s&&v.removeEventListener("resize",i)}),f==null||f(),(m=u)==null||m.disconnect(),u=null,a&&cancelAnimationFrame(d)}}const He=be,$e=(t,e,i)=>{const n=new Map,o={platform:Ne,...i},s={...o.platform,_c:n};return ye(t,e,{...o,platform:s})},Ie=Zt`
  @layer base, reset, transitional-styles;
  @layer base {
    :host {
      display: contents;
    }

    :host([open]) dialog {
      opacity: 1;
      box-sizing: border-box;
      transform: translate3d(0, 0, 0);
      visibility: visible;
    }

    dialog {
      inset: auto;
      position: fixed;
      overflow: hidden;
      padding: 0px;
      box-sizing: border-box;
      right: 0;
      margin: 0;
      box-shadow:
        0 0 0 1px rgba(0, 0, 0, 0.2),
        0 1rem 28px rgba(0, 0, 0, 0.15);
      border-width: 0;
      border-radius: 0.5rem;
    }

    header {
      display: none;
    }

    dialog::backdrop {
      background-color: transparent;
      display: block;
      position: fixed;
    }
  }
`;var ze=Object.defineProperty,Ke=Object.getOwnPropertyDescriptor,w=(t,e,i,n)=>{for(var o=n>1?void 0:n?Ke(e,i):e,s=t.length-1,r;s>=0;s--)(r=t[s])&&(o=(n?r(e,i,o):r(o))||o);return n&&o&&ze(e,i,o),o},Lt=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},b=(t,e,i)=>(Lt(t,e,"read from private field"),i?i.call(t):e.get(t)),C=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Gt=(t,e,i,n)=>(Lt(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),N=(t,e,i)=>(Lt(t,e,"access private method"),i),gt,qt,F,lt,D,mt,tt,yt,wt,Qt,bt,jt,et,vt,ht,ut,it,nt;let y=class extends ne{constructor(){super(...arguments),C(this,gt),C(this,tt),C(this,wt),C(this,bt),C(this,et),this.open=!1,this.popupRole="dialog",this.label=void 0,this.placement="bottom-start",this.useModalInMobileView=!1,this.calcMinWidth=t=>`${t.offsetWidth}px`,this.calcMaxWidth=t=>"auto",this.calcMinHeight=t=>"auto",this.calcMaxHeight=t=>"500px",this._trigger=void 0,this._anchor=void 0,this._isVirtKbVisible=!1,C(this,F,void 0),C(this,lt,!1),C(this,D,t=>{this.dispatchEvent(new CustomEvent("gds-ui-state",{detail:{open:this.open,reason:t},bubbles:!1,composed:!1}))}),C(this,mt,t=>{t.stopPropagation(),t.preventDefault(),this.open=!1,b(this,D).call(this,"close"),setTimeout(()=>{var e;return(e=this._trigger)==null?void 0:e.focus()},250)}),C(this,ht,t=>{(t.key==="ArrowDown"||t.key==="ArrowUp")&&(t.preventDefault(),this.open=!0,b(this,D).call(this,"show")),t.key==="Escape"&&(this.open=!1,b(this,D).call(this,"cancel"))}),C(this,ut,t=>{t.preventDefault(),this.open=!this.open,b(this,D).call(this,this.open?"show":"close")}),C(this,it,()=>{var e;const t=(e=this._elDefaultSlot)==null?void 0:e.assignedElements()[0];this.updateComplete.then(()=>{t==null||t.focus()})}),C(this,nt,t=>{const e=t,i=this._elDialog;if((e.clientX>0||e.clientY>0)&&i&&this.open){const o=i.getBoundingClientRect();o.top<=e.clientY&&e.clientY<=o.top+o.height&&o.left<=e.clientX&&e.clientX<=o.left+o.width||(e.stopPropagation(),this.open=!1,b(this,D).call(this,"close"))}})}_handleTriggerRefChanged(){var t;(t=this.triggerRef)==null||t.then(e=>{e&&(this._trigger=e)})}_handleAnchorRefChanged(){var t;(t=this.anchorRef)==null||t.then(e=>{e&&(this._anchor=e)})}_handleTriggerChanged(){N(this,tt,yt).call(this),N(this,bt,jt).call(this)}_handleAnchorChanged(){N(this,et,vt).call(this)}connectedCallback(){super.connectedCallback(),re.instance.apply(this,"gds-popover"),N(this,tt,yt).call(this),this._handleOpenChange(),this.addEventListener("keydown",t=>{t.key==="Escape"&&(this.open=!1,b(this,D).call(this,"cancel"),t.stopPropagation(),t.preventDefault())}),this.addEventListener("focusin",t=>{const e=t.target;e.tagName==="INPUT"||e.tagName==="TEXTAREA"?this._isVirtKbVisible=!0:this._isVirtKbVisible=!1}),this.addEventListener("blurin",t=>{this._isVirtKbVisible=!1})}disconnectedCallback(){super.disconnectedCallback(),N(this,wt,Qt).call(this)}render(){return ee`<slot
        name="trigger"
        @slotchange=${N(this,gt,qt)}
      ></slot>
      <div ?hidden="${!this.open}">
        <dialog
          class="${oe({"v-kb-visible":this._isVirtKbVisible,"use-modal-in-mobile":this.useModalInMobileView})}"
          aria-hidden="${String(!this.open)}"
          @close=${()=>this.open=!1}
        >
          <header>
            <h2>${this.label}</h2>
            <gds-button
              @click=${b(this,mt)}
              class="close"
              label="${se("Close")}"
              size="small"
              rank="tertiary"
            >
              <gds-icon-cross-small></icon-cross-small>
            </gds-button>
          </header>
          <slot></slot>
        </dialog>
      </div>`}_handleOpenChange(){this.updateComplete.then(()=>{var t,e,i,n;(t=this._trigger)==null||t.setAttribute("aria-expanded",String(this.open)),this.open?((e=this._elDialog)==null||e.showModal(),b(this,it).call(this),setTimeout(()=>b(this,it).call(this),250),setTimeout(()=>{var o;return(o=this._elDialog)==null?void 0:o.addEventListener("click",b(this,nt))},0)):((i=this._elDialog)==null||i.close(),(n=this._elDialog)==null||n.removeEventListener("click",b(this,nt)))})}_handleMobileLayout(t){var i,n,o;var e;Gt(this,lt,t),t&&this.useModalInMobileView?((e=b(this,F))==null||e.call(this),(i=this._elDialog)==null||i.style.removeProperty("left"),(n=this._elDialog)==null||n.style.removeProperty("top"),(o=this._elDialog)==null||o.style.removeProperty("minWidth"),this.updateComplete.then(()=>{var s;this.open&&((s=this._elDialog)==null||s.showModal())})):this.updateComplete.then(()=>{N(this,et,vt).call(this)})}};gt=new WeakSet;qt=function(){this._elTriggerSlot&&this._elTriggerSlot.assignedElements()[0]&&(this._trigger=this._elTriggerSlot.assignedElements()[0],this._anchor=this._elTriggerSlot.assignedElements()[0])};F=new WeakMap;lt=new WeakMap;D=new WeakMap;mt=new WeakMap;tt=new WeakSet;yt=function(){var t,e;(t=this._trigger)==null||t.addEventListener("keydown",b(this,ht)),(e=this._trigger)==null||e.addEventListener("click",b(this,ut))};wt=new WeakSet;Qt=function(){var e,i;var t;(e=this._trigger)==null||e.removeEventListener("keydown",b(this,ht)),(i=this._trigger)==null||i.removeEventListener("click",b(this,ut)),(t=b(this,F))==null||t.call(this)};bt=new WeakSet;jt=function(){var t;if(this._trigger){(t=this._trigger)==null||t.setAttribute("aria-expanded",String(this.open));const e=["A","BUTTON","INPUT","TEXTAREA"];this._trigger.nodeName.startsWith("GDS-")||e.includes(this._trigger.nodeName)||(this._trigger.setAttribute("tabindex","0"),this._trigger.setAttribute("role","button"));const n=this._trigger.nodeName.startsWith("GDS-")?"gds-aria-haspopup":"aria-haspopup";this._trigger.getAttribute(n)===null&&this._trigger.setAttribute(n,this.popupRole)}};et=new WeakSet;vt=function(){if(!this._anchor||!this._elDialog)return;const t=this._anchor,e=this._elDialog;!t||!e||b(this,lt)&&this.useModalInMobileView||(b(this,F)&&b(this,F).call(this),Gt(this,F,Be(t,e,()=>{$e(t,e,{placement:this.placement,middleware:[xe(8),He()],strategy:"fixed"}).then(({x:i,y:n})=>Object.assign(e.style,{left:`${i}px`,top:`${n}px`,minWidth:this.calcMinWidth(t),maxWidth:this.calcMaxWidth(t),minHeight:this.calcMinHeight(t),maxHeight:this.calcMaxHeight(t)}))})))};ht=new WeakMap;ut=new WeakMap;it=new WeakMap;nt=new WeakMap;y.styles=te(Ie);w([L({type:Boolean,reflect:!0})],y.prototype,"open",2);w([L({attribute:"popup-role"})],y.prototype,"popupRole",2);w([L({attribute:!1})],y.prototype,"triggerRef",2);w([L({attribute:!1})],y.prototype,"anchorRef",2);w([L()],y.prototype,"label",2);w([L()],y.prototype,"placement",2);w([L()],y.prototype,"useModalInMobileView",2);w([L({attribute:!1})],y.prototype,"calcMinWidth",2);w([L({attribute:!1})],y.prototype,"calcMaxWidth",2);w([L({attribute:!1})],y.prototype,"calcMinHeight",2);w([L({attribute:!1})],y.prototype,"calcMaxHeight",2);w([xt()],y.prototype,"_trigger",2);w([xt()],y.prototype,"_anchor",2);w([xt()],y.prototype,"_isVirtKbVisible",2);w([_t("slot:not([name])")],y.prototype,"_elDefaultSlot",2);w([_t('slot[name="trigger"]')],y.prototype,"_elTriggerSlot",2);w([_t("dialog")],y.prototype,"_elDialog",2);w([Q("triggerRef")],y.prototype,"_handleTriggerRefChanged",1);w([Q("anchorRef")],y.prototype,"_handleAnchorRefChanged",1);w([Q("_trigger")],y.prototype,"_handleTriggerChanged",1);w([Q("_anchor")],y.prototype,"_handleAnchorChanged",1);w([Q("open")],y.prototype,"_handleOpenChange",1);w([le("(max-width: 576px)")],y.prototype,"_handleMobileLayout",1);y=w([ie("gds-popover")],y);
