import{i as te,r as ee,x as ie}from"./lit-element-71e04f06.js";import{n as k,r as _t}from"./Reflect-8da9b77b.js";import{a as Et}from"./query-b9d3c2af.js";import{e as ne}from"./class-map-4ef1884f.js";import{m as oe}from"./lit-localize-87611c26.js";import{g as se,G as re}from"./gds-element-d272b33a.js";import{w as j}from"./watch-c4961afe.js";import{T as le}from"./transitional-styles-270c55d2.js";import"./cross-small-857cc48b.js";function ae(t){return(e,i,n)=>{const o=window.matchMedia(t),s=e.connectedCallback,r=e.disconnectedCallback;e.connectedCallback=function(){var a;s==null||s.call(this);const l=c=>{var h;(h=n.value)==null||h.call(this,c.matches)};o.addEventListener("change",l),this.disconnectedCallback=function(){r==null||r.call(this),o.removeEventListener("change",l)},(a=n.value)==null||a.call(this,o.matches)}}}const pt=Math.min,I=Math.max,st=Math.round,tt=Math.floor,D=t=>({x:t,y:t}),ce={left:"right",right:"left",bottom:"top",top:"bottom"},fe={start:"end",end:"start"};function Ct(t,e){return typeof t=="function"?t(e):t}function K(t){return t.split("-")[0]}function ct(t){return t.split("-")[1]}function he(t){return t==="x"?"y":"x"}function Ft(t){return t==="y"?"height":"width"}function Tt(t){return["top","bottom"].includes(K(t))?"y":"x"}function Bt(t){return he(Tt(t))}function ue(t,e,i){i===void 0&&(i=!1);const n=ct(t),o=Bt(t),s=Ft(o);let r=o==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(r=rt(r)),[r,rt(r)]}function de(t){const e=rt(t);return[gt(t),e,gt(e)]}function gt(t){return t.replace(/start|end/g,e=>fe[e])}function pe(t,e,i){const n=["left","right"],o=["right","left"],s=["top","bottom"],r=["bottom","top"];switch(t){case"top":case"bottom":return i?e?o:n:e?n:o;case"left":case"right":return e?s:r;default:return[]}}function ge(t,e,i,n){const o=ct(t);let s=pe(K(t),i==="start",n);return o&&(s=s.map(r=>r+"-"+o),e&&(s=s.concat(s.map(gt)))),s}function rt(t){return t.replace(/left|right|bottom|top/g,e=>ce[e])}function me(t){return{top:0,right:0,bottom:0,left:0,...t}}function ye(t){return typeof t!="number"?me(t):{top:t,right:t,bottom:t,left:t}}function lt(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function Wt(t,e,i){let{reference:n,floating:o}=t;const s=Tt(e),r=Bt(e),l=Ft(r),a=K(e),c=s==="y",h=n.x+n.width/2-o.width/2,f=n.y+n.height/2-o.height/2,g=n[l]/2-o[l]/2;let u;switch(a){case"top":u={x:h,y:n.y-o.height};break;case"bottom":u={x:h,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:f};break;case"left":u={x:n.x-o.width,y:f};break;default:u={x:n.x,y:n.y}}switch(ct(e)){case"start":u[r]-=g*(i&&c?-1:1);break;case"end":u[r]+=g*(i&&c?-1:1);break}return u}const we=async(t,e,i)=>{const{placement:n="bottom",strategy:o="absolute",middleware:s=[],platform:r}=i,l=s.filter(Boolean),a=await(r.isRTL==null?void 0:r.isRTL(e));let c=await r.getElementRects({reference:t,floating:e,strategy:o}),{x:h,y:f}=Wt(c,n,a),g=n,u={},d=0;for(let p=0;p<l.length;p++){const{name:E,fn:m}=l[p],{x:v,y:x,data:R,reset:_}=await m({x:h,y:f,initialPlacement:n,placement:g,strategy:o,middlewareData:u,rects:c,platform:r,elements:{reference:t,floating:e}});h=v??h,f=x??f,u={...u,[E]:{...u[E],...R}},_&&d<=50&&(d++,typeof _=="object"&&(_.placement&&(g=_.placement),_.rects&&(c=_.rects===!0?await r.getElementRects({reference:t,floating:e,strategy:o}):_.rects),{x:h,y:f}=Wt(c,g,a)),p=-1)}return{x:h,y:f,placement:g,strategy:o,middlewareData:u}};async function be(t,e){var i;e===void 0&&(e={});const{x:n,y:o,platform:s,rects:r,elements:l,strategy:a}=t,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:g=!1,padding:u=0}=Ct(e,t),d=ye(u),E=l[g?f==="floating"?"reference":"floating":f],m=lt(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(E)))==null||i?E:E.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:c,rootBoundary:h,strategy:a})),v=f==="floating"?{...r.floating,x:n,y:o}:r.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),R=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},_=lt(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:x,strategy:a}):v);return{top:(m.top-_.top+d.top)/R.y,bottom:(_.bottom-m.bottom+d.bottom)/R.y,left:(m.left-_.left+d.left)/R.x,right:(_.right-m.right+d.right)/R.x}}const ve=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,n;const{placement:o,middlewareData:s,rects:r,initialPlacement:l,platform:a,elements:c}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:g,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:p=!0,...E}=Ct(t,e);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const m=K(o),v=K(l)===l,x=await(a.isRTL==null?void 0:a.isRTL(c.floating)),R=g||(v||!p?[rt(l)]:de(l));!g&&d!=="none"&&R.push(...ge(l,p,d,x));const _=[l,...R],W=await be(e,E),Z=[];let Y=((n=s.flip)==null?void 0:n.overflows)||[];if(h&&Z.push(W[m]),f){const P=ue(o,r,x);Z.push(W[P[0]],W[P[1]])}if(Y=[...Y,{placement:o,overflows:Z}],!Z.every(P=>P<=0)){var Mt,Ot;const P=(((Mt=s.flip)==null?void 0:Mt.index)||0)+1,St=_[P];if(St)return{data:{index:P,overflows:Y},reset:{placement:St}};let U=(Ot=Y.filter(H=>H.overflows[0]<=0).sort((H,$)=>H.overflows[1]-$.overflows[1])[0])==null?void 0:Ot.placement;if(!U)switch(u){case"bestFit":{var Dt;const H=(Dt=Y.map($=>[$.placement,$.overflows.filter(G=>G>0).reduce((G,Zt)=>G+Zt,0)]).sort(($,G)=>$[1]-G[1])[0])==null?void 0:Dt[0];H&&(U=H);break}case"initialPlacement":U=l;break}if(o!==U)return{reset:{placement:U}}}return{}}}};async function xe(t,e){const{placement:i,platform:n,elements:o}=t,s=await(n.isRTL==null?void 0:n.isRTL(o.floating)),r=K(i),l=ct(i),a=Tt(i)==="y",c=["left","top"].includes(r)?-1:1,h=s&&a?-1:1,f=Ct(e,t);let{mainAxis:g,crossAxis:u,alignmentAxis:d}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return l&&typeof d=="number"&&(u=l==="end"?d*-1:d),a?{x:u*h,y:g*c}:{x:g*c,y:u*h}}const _e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,n;const{x:o,y:s,placement:r,middlewareData:l}=e,a=await xe(e,t);return r===((i=l.offset)==null?void 0:i.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:o+a.x,y:s+a.y,data:{...a,placement:r}}}}};function S(t){return Ht(t)?(t.nodeName||"").toLowerCase():"#document"}function T(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function O(t){var e;return(e=(Ht(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Ht(t){return t instanceof Node||t instanceof T(t).Node}function M(t){return t instanceof Element||t instanceof T(t).Element}function L(t){return t instanceof HTMLElement||t instanceof T(t).HTMLElement}function Pt(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof T(t).ShadowRoot}function J(t){const{overflow:e,overflowX:i,overflowY:n,display:o}=A(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+i)&&!["inline","contents"].includes(o)}function Ee(t){return["table","td","th"].includes(S(t))}function Rt(t){const e=At(),i=A(t);return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(i.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(i.contain||"").includes(n))}function $t(t){let e=X(t);for(;L(e)&&!ft(e);){if(Rt(e))return e;e=X(e)}return null}function At(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ft(t){return["html","body","#document"].includes(S(t))}function A(t){return T(t).getComputedStyle(t)}function ht(t){return M(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function X(t){if(S(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Pt(t)&&t.host||O(t);return Pt(e)?e.host:e}function It(t){const e=X(t);return ft(e)?t.ownerDocument?t.ownerDocument.body:t.body:L(e)&&J(e)?e:It(e)}function Q(t,e,i){var n;e===void 0&&(e=[]),i===void 0&&(i=!0);const o=It(t),s=o===((n=t.ownerDocument)==null?void 0:n.body),r=T(o);return s?e.concat(r,r.visualViewport||[],J(o)?o:[],r.frameElement&&i?Q(r.frameElement):[]):e.concat(o,Q(o,[],i))}function zt(t){const e=A(t);let i=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const o=L(t),s=o?t.offsetWidth:i,r=o?t.offsetHeight:n,l=st(i)!==s||st(n)!==r;return l&&(i=s,n=r),{width:i,height:n,$:l}}function kt(t){return M(t)?t:t.contextElement}function z(t){const e=kt(t);if(!L(e))return D(1);const i=e.getBoundingClientRect(),{width:n,height:o,$:s}=zt(e);let r=(s?st(i.width):i.width)/n,l=(s?st(i.height):i.height)/o;return(!r||!Number.isFinite(r))&&(r=1),(!l||!Number.isFinite(l))&&(l=1),{x:r,y:l}}const Ce=D(0);function Kt(t){const e=T(t);return!At()||!e.visualViewport?Ce:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Te(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==T(t)?!1:e}function B(t,e,i,n){e===void 0&&(e=!1),i===void 0&&(i=!1);const o=t.getBoundingClientRect(),s=kt(t);let r=D(1);e&&(n?M(n)&&(r=z(n)):r=z(t));const l=Te(s,i,n)?Kt(s):D(0);let a=(o.left+l.x)/r.x,c=(o.top+l.y)/r.y,h=o.width/r.x,f=o.height/r.y;if(s){const g=T(s),u=n&&M(n)?T(n):n;let d=g.frameElement;for(;d&&n&&u!==g;){const p=z(d),E=d.getBoundingClientRect(),m=A(d),v=E.left+(d.clientLeft+parseFloat(m.paddingLeft))*p.x,x=E.top+(d.clientTop+parseFloat(m.paddingTop))*p.y;a*=p.x,c*=p.y,h*=p.x,f*=p.y,a+=v,c+=x,d=T(d).frameElement}}return lt({width:h,height:f,x:a,y:c})}const Re=[":popover-open",":modal"];function Xt(t){let e=!1,i=0,n=0;function o(s){try{e=e||t.matches(s)}catch{}}if(Re.forEach(s=>{o(s)}),e){const s=$t(t);if(s){const r=s.getBoundingClientRect();i=r.x,n=r.y}}return[e,i,n]}function Ae(t){let{elements:e,rect:i,offsetParent:n,strategy:o}=t;const s=O(n),[r]=e?Xt(e.floating):[!1];if(n===s||r)return i;let l={scrollLeft:0,scrollTop:0},a=D(1);const c=D(0),h=L(n);if((h||!h&&o!=="fixed")&&((S(n)!=="body"||J(s))&&(l=ht(n)),L(n))){const f=B(n);a=z(n),c.x=f.x+n.clientLeft,c.y=f.y+n.clientTop}return{width:i.width*a.x,height:i.height*a.y,x:i.x*a.x-l.scrollLeft*a.x+c.x,y:i.y*a.y-l.scrollTop*a.y+c.y}}function ke(t){return Array.from(t.getClientRects())}function Yt(t){return B(O(t)).left+ht(t).scrollLeft}function Le(t){const e=O(t),i=ht(t),n=t.ownerDocument.body,o=I(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=I(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let r=-i.scrollLeft+Yt(t);const l=-i.scrollTop;return A(n).direction==="rtl"&&(r+=I(e.clientWidth,n.clientWidth)-o),{width:o,height:s,x:r,y:l}}function Me(t,e){const i=T(t),n=O(t),o=i.visualViewport;let s=n.clientWidth,r=n.clientHeight,l=0,a=0;if(o){s=o.width,r=o.height;const c=At();(!c||c&&e==="fixed")&&(l=o.offsetLeft,a=o.offsetTop)}return{width:s,height:r,x:l,y:a}}function Oe(t,e){const i=B(t,!0,e==="fixed"),n=i.top+t.clientTop,o=i.left+t.clientLeft,s=L(t)?z(t):D(1),r=t.clientWidth*s.x,l=t.clientHeight*s.y,a=o*s.x,c=n*s.y;return{width:r,height:l,x:a,y:c}}function Vt(t,e,i){let n;if(e==="viewport")n=Me(t,i);else if(e==="document")n=Le(O(t));else if(M(e))n=Oe(e,i);else{const o=Kt(t);n={...e,x:e.x-o.x,y:e.y-o.y}}return lt(n)}function Ut(t,e){const i=X(t);return i===e||!M(i)||ft(i)?!1:A(i).position==="fixed"||Ut(i,e)}function De(t,e){const i=e.get(t);if(i)return i;let n=Q(t,[],!1).filter(l=>M(l)&&S(l)!=="body"),o=null;const s=A(t).position==="fixed";let r=s?X(t):t;for(;M(r)&&!ft(r);){const l=A(r),a=Rt(r);!a&&l.position==="fixed"&&(o=null),(s?!a&&!o:!a&&l.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||J(r)&&!a&&Ut(t,r))?n=n.filter(h=>h!==r):o=l,r=X(r)}return e.set(t,n),n}function Se(t){let{element:e,boundary:i,rootBoundary:n,strategy:o}=t;const r=[...i==="clippingAncestors"?De(e,this._c):[].concat(i),n],l=r[0],a=r.reduce((c,h)=>{const f=Vt(e,h,o);return c.top=I(f.top,c.top),c.right=pt(f.right,c.right),c.bottom=pt(f.bottom,c.bottom),c.left=I(f.left,c.left),c},Vt(e,l,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function We(t){const{width:e,height:i}=zt(t);return{width:e,height:i}}function Pe(t,e,i,n){const o=L(e),s=O(e),r=i==="fixed",l=B(t,!0,r,e);let a={scrollLeft:0,scrollTop:0};const c=D(0);if(o||!o&&!r)if((S(e)!=="body"||J(s))&&(a=ht(e)),o){const p=B(e,!0,r,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=Yt(s));let h=l.left+a.scrollLeft-c.x,f=l.top+a.scrollTop-c.y;const[g,u,d]=Xt(n);return g&&(h+=u,f+=d,o&&(h+=e.clientLeft,f+=e.clientTop)),{x:h,y:f,width:l.width,height:l.height}}function Nt(t,e){return!L(t)||A(t).position==="fixed"?null:e?e(t):t.offsetParent}function Gt(t,e){const i=T(t);if(!L(t))return i;let n=Nt(t,e);for(;n&&Ee(n)&&A(n).position==="static";)n=Nt(n,e);return n&&(S(n)==="html"||S(n)==="body"&&A(n).position==="static"&&!Rt(n))?i:n||$t(t)||i}const Ve=async function(t){const e=this.getOffsetParent||Gt,i=this.getDimensions;return{reference:Pe(t.reference,await e(t.floating),t.strategy,t.floating),floating:{x:0,y:0,...await i(t.floating)}}};function Ne(t){return A(t).direction==="rtl"}const Fe={convertOffsetParentRelativeRectToViewportRelativeRect:Ae,getDocumentElement:O,getClippingRect:Se,getOffsetParent:Gt,getElementRects:Ve,getClientRects:ke,getDimensions:We,getScale:z,isElement:M,isRTL:Ne};function Be(t,e){let i=null,n;const o=O(t);function s(){var l;clearTimeout(n),(l=i)==null||l.disconnect(),i=null}function r(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),s();const{left:c,top:h,width:f,height:g}=t.getBoundingClientRect();if(l||e(),!f||!g)return;const u=tt(h),d=tt(o.clientWidth-(c+f)),p=tt(o.clientHeight-(h+g)),E=tt(c),v={rootMargin:-u+"px "+-d+"px "+-p+"px "+-E+"px",threshold:I(0,pt(1,a))||1};let x=!0;function R(_){const W=_[0].intersectionRatio;if(W!==a){if(!x)return r();W?r(!1,W):n=setTimeout(()=>{r(!1,1e-7)},100)}x=!1}try{i=new IntersectionObserver(R,{...v,root:o.ownerDocument})}catch{i=new IntersectionObserver(R,v)}i.observe(t)}return r(!0),s}function He(t,e,i,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=n,c=kt(t),h=o||s?[...c?Q(c):[],...Q(e)]:[];h.forEach(m=>{o&&m.addEventListener("scroll",i,{passive:!0}),s&&m.addEventListener("resize",i)});const f=c&&l?Be(c,i):null;let g=-1,u=null;r&&(u=new ResizeObserver(m=>{let[v]=m;v&&v.target===c&&u&&(u.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var x;(x=u)==null||x.observe(e)})),i()}),c&&!a&&u.observe(c),u.observe(e));let d,p=a?B(t):null;a&&E();function E(){const m=B(t);p&&(m.x!==p.x||m.y!==p.y||m.width!==p.width||m.height!==p.height)&&i(),p=m,d=requestAnimationFrame(E)}return i(),()=>{var m;h.forEach(v=>{o&&v.removeEventListener("scroll",i),s&&v.removeEventListener("resize",i)}),f==null||f(),(m=u)==null||m.disconnect(),u=null,a&&cancelAnimationFrame(d)}}const $e=ve,Ie=(t,e,i)=>{const n=new Map,o={platform:Fe,...i},s={...o.platform,_c:n};return we(t,e,{...o,platform:s})},ze=te`
  @layer base, reset, transitional-styles;
  @layer base {
    :host {
      display: contents;
    }

    :host([open]) dialog {
      opacity: 1;
      box-sizing: border-box;
      transform: translate3d(0, 0, 0);
      visibility: visible;
    }

    dialog {
      inset: auto;
      position: fixed;
      overflow: hidden;
      padding: 0px;
      box-sizing: border-box;
      right: 0;
      margin: 0;
      box-shadow:
        0 0 0 1px rgba(0, 0, 0, 0.2),
        0 1rem 28px rgba(0, 0, 0, 0.15);
      border-width: 0;
      border-radius: 0.5rem;
    }

    header {
      display: none;
    }

    dialog::backdrop {
      background-color: transparent;
      display: block;
      position: fixed;
    }
  }
`;var Ke=Object.defineProperty,Xe=Object.getOwnPropertyDescriptor,w=(t,e,i,n)=>{for(var o=n>1?void 0:n?Xe(e,i):e,s=t.length-1,r;s>=0;s--)(r=t[s])&&(o=(n?r(e,i,o):r(o))||o);return n&&o&&Ke(e,i,o),o},Lt=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},b=(t,e,i)=>(Lt(t,e,"read from private field"),i?i.call(t):e.get(t)),C=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},qt=(t,e,i,n)=>(Lt(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),V=(t,e,i)=>(Lt(t,e,"access private method"),i),mt,Qt,F,at,q,N,yt,et,wt,bt,jt,vt,Jt,it,xt,ut,dt,nt,ot;let y=class extends re{constructor(){super(...arguments),C(this,mt),C(this,et),C(this,bt),C(this,vt),C(this,it),this.open=!1,this.popupRole="dialog",this.label=void 0,this.placement="bottom-start",this.useModalInMobileView=!1,this.calcMinWidth=t=>`${t.offsetWidth}px`,this.calcMaxWidth=t=>"auto",this.calcMinHeight=t=>"auto",this.calcMaxHeight=t=>"500px",this._trigger=void 0,this._anchor=void 0,this._isVirtKbVisible=!1,C(this,F,void 0),C(this,at,!1),C(this,q,()=>{this.open=!1,b(this,N).call(this,"cancel")}),C(this,N,t=>{this.dispatchEvent(new CustomEvent("gds-ui-state",{detail:{open:this.open,reason:t},bubbles:!1,composed:!1}))}),C(this,yt,t=>{t.stopPropagation(),t.preventDefault(),this.open=!1,b(this,N).call(this,"close"),setTimeout(()=>{var e;return(e=this._trigger)==null?void 0:e.focus()},250)}),C(this,ut,t=>{(t.key==="ArrowDown"||t.key==="ArrowUp")&&(t.preventDefault(),this.open=!0,b(this,N).call(this,"show")),t.key==="Escape"&&this.open&&b(this,q).call(this)}),C(this,dt,t=>{t.preventDefault(),this.open=!this.open,b(this,N).call(this,this.open?"show":"close")}),C(this,nt,()=>{var e;const t=(e=this._elDefaultSlot)==null?void 0:e.assignedElements()[0];this.updateComplete.then(()=>{t==null||t.focus()})}),C(this,ot,t=>{const e=t,i=this._elDialog;if((e.clientX>0||e.clientY>0)&&i&&this.open){const o=i.getBoundingClientRect();o.top<=e.clientY&&e.clientY<=o.top+o.height&&o.left<=e.clientX&&e.clientX<=o.left+o.width||(e.stopPropagation(),this.open=!1,b(this,N).call(this,"close"))}})}_handleTriggerRefChanged(){var t;(t=this.triggerRef)==null||t.then(e=>{e&&(this._trigger=e)})}_handleAnchorRefChanged(){var t;(t=this.anchorRef)==null||t.then(e=>{e&&(this._anchor=e)})}_handleTriggerChanged(){V(this,et,wt).call(this),V(this,vt,Jt).call(this)}_handleAnchorChanged(){V(this,it,xt).call(this)}connectedCallback(){super.connectedCallback(),le.instance.apply(this,"gds-popover"),V(this,et,wt).call(this),this._handleOpenChange(),this.addEventListener("keydown",t=>{t.key==="Escape"&&this.open&&(b(this,q).call(this),t.stopPropagation(),t.preventDefault())}),this.addEventListener("focusin",t=>{const e=t.target;e.tagName==="INPUT"||e.tagName==="TEXTAREA"?this._isVirtKbVisible=!0:this._isVirtKbVisible=!1}),this.addEventListener("blurin",t=>{this._isVirtKbVisible=!1})}disconnectedCallback(){super.disconnectedCallback(),V(this,bt,jt).call(this)}render(){return ie`<slot
        name="trigger"
        @slotchange=${V(this,mt,Qt)}
      ></slot>
      <div ?hidden="${!this.open}">
        <dialog
          class="${ne({"v-kb-visible":this._isVirtKbVisible,"use-modal-in-mobile":this.useModalInMobileView})}"
          aria-hidden="${String(!this.open)}"
          @close=${()=>this.open&&b(this,q).call(this)}
        >
          <header>
            <h2>${this.label}</h2>
            <gds-button
              @click=${b(this,yt)}
              class="close"
              label="${oe("Close")}"
              size="small"
              rank="tertiary"
            >
              <gds-icon-cross-small></icon-cross-small>
            </gds-button>
          </header>
          <slot></slot>
        </dialog>
      </div>`}_handleOpenChange(){this.updateComplete.then(()=>{var t,e,i,n;(t=this._trigger)==null||t.setAttribute("aria-expanded",String(this.open)),this.open?((e=this._elDialog)==null||e.showModal(),b(this,nt).call(this),setTimeout(()=>b(this,nt).call(this),250),setTimeout(()=>{var o;return(o=this._elDialog)==null?void 0:o.addEventListener("click",b(this,ot))},0)):((i=this._elDialog)==null||i.close(),(n=this._elDialog)==null||n.removeEventListener("click",b(this,ot)))})}_handleMobileLayout(t){var i,n,o;var e;qt(this,at,t),t&&this.useModalInMobileView?((e=b(this,F))==null||e.call(this),(i=this._elDialog)==null||i.style.removeProperty("left"),(n=this._elDialog)==null||n.style.removeProperty("top"),(o=this._elDialog)==null||o.style.removeProperty("minWidth"),this.updateComplete.then(()=>{var s;this.open&&((s=this._elDialog)==null||s.showModal())})):this.updateComplete.then(()=>{V(this,it,xt).call(this)})}};mt=new WeakSet;Qt=function(){this._elTriggerSlot&&this._elTriggerSlot.assignedElements()[0]&&(this._trigger=this._elTriggerSlot.assignedElements()[0],this._anchor=this._elTriggerSlot.assignedElements()[0])};F=new WeakMap;at=new WeakMap;q=new WeakMap;N=new WeakMap;yt=new WeakMap;et=new WeakSet;wt=function(){var t,e;(t=this._trigger)==null||t.addEventListener("keydown",b(this,ut)),(e=this._trigger)==null||e.addEventListener("click",b(this,dt))};bt=new WeakSet;jt=function(){var e,i;var t;(e=this._trigger)==null||e.removeEventListener("keydown",b(this,ut)),(i=this._trigger)==null||i.removeEventListener("click",b(this,dt)),(t=b(this,F))==null||t.call(this)};vt=new WeakSet;Jt=function(){var t;if(this._trigger){(t=this._trigger)==null||t.setAttribute("aria-expanded",String(this.open));const e=["A","BUTTON","INPUT","TEXTAREA"];this._trigger.nodeName.startsWith("GDS-")||e.includes(this._trigger.nodeName)||(this._trigger.setAttribute("tabindex","0"),this._trigger.setAttribute("role","button"));const n=this._trigger.nodeName.startsWith("GDS-")?"gds-aria-haspopup":"aria-haspopup";this._trigger.getAttribute(n)===null&&this._trigger.setAttribute(n,this.popupRole)}};it=new WeakSet;xt=function(){if(!this._anchor||!this._elDialog)return;const t=this._anchor,e=this._elDialog;!t||!e||b(this,at)&&this.useModalInMobileView||(b(this,F)&&b(this,F).call(this),qt(this,F,He(t,e,()=>{Ie(t,e,{placement:this.placement,middleware:[_e(8),$e()],strategy:"fixed"}).then(({x:i,y:n})=>Object.assign(e.style,{left:`${i}px`,top:`${n}px`,minWidth:this.calcMinWidth(t),maxWidth:this.calcMaxWidth(t),minHeight:this.calcMinHeight(t),maxHeight:this.calcMaxHeight(t)}))})))};ut=new WeakMap;dt=new WeakMap;nt=new WeakMap;ot=new WeakMap;y.styles=ee(ze);w([k({type:Boolean,reflect:!0})],y.prototype,"open",2);w([k({attribute:"popup-role"})],y.prototype,"popupRole",2);w([k({attribute:!1})],y.prototype,"triggerRef",2);w([k({attribute:!1})],y.prototype,"anchorRef",2);w([k()],y.prototype,"label",2);w([k()],y.prototype,"placement",2);w([k()],y.prototype,"useModalInMobileView",2);w([k({attribute:!1})],y.prototype,"calcMinWidth",2);w([k({attribute:!1})],y.prototype,"calcMaxWidth",2);w([k({attribute:!1})],y.prototype,"calcMinHeight",2);w([k({attribute:!1})],y.prototype,"calcMaxHeight",2);w([_t()],y.prototype,"_trigger",2);w([_t()],y.prototype,"_anchor",2);w([_t()],y.prototype,"_isVirtKbVisible",2);w([Et("slot:not([name])")],y.prototype,"_elDefaultSlot",2);w([Et('slot[name="trigger"]')],y.prototype,"_elTriggerSlot",2);w([Et("dialog")],y.prototype,"_elDialog",2);w([j("triggerRef")],y.prototype,"_handleTriggerRefChanged",1);w([j("anchorRef")],y.prototype,"_handleAnchorRefChanged",1);w([j("_trigger")],y.prototype,"_handleTriggerChanged",1);w([j("_anchor")],y.prototype,"_handleAnchorChanged",1);w([j("open")],y.prototype,"_handleOpenChange",1);w([ae("(max-width: 576px)")],y.prototype,"_handleMobileLayout",1);y=w([se("gds-popover")],y);
