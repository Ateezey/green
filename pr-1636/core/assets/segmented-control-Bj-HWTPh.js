import{r as $}from"./lit-element-BoQqPHl6.js";import{n as u,g as C,G as z,h as W,r as B}from"./gds-element-QykLKB9o.js";import{a as S}from"./query-p8xgzTDt.js";import{m as V}from"./runtime-CMQcyTl6.js";import{T as M}from"./transitional-styles-C6IQsa0n.js";import{w as T}from"./watch-tFciLXSI.js";import{r as G}from"./resize-observer-B9k8v2TZ.js";import{t as P}from"./tokens.style-DuOE18tp.js";import"./chevron-right-BDfeV3uD.js";const L=":host{display:flex;z-index:1}button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border-radius:calc(infinity * 1px);border-width:0;color:var(--gds-sys-color-content-content);cursor:pointer;flex-grow:1;flex-shrink:0;font-family:inherit;font-size:inherit;overflow:hidden;padding:0 1rem;text-align:center;text-overflow:ellipsis;white-space:nowrap;width:100%}button:disabled{cursor:not-allowed;opacity:.5}@media (pointer: fine){button:hover{background-color:color-mix(in srgb,var(--gds-sys-color-state-layers-state-black-dim1),transparent)}button:hover:disabled{background-color:transparent}}button:focus-visible{outline:2px solid #000;outline-offset:-2px}";var N=Object.defineProperty,D=Object.getOwnPropertyDescriptor,b=(t,e,s,r)=>{for(var i=r>1?void 0:r?D(e,s):e,l=t.length-1,h;l>=0;l--)(h=t[l])&&(i=(r?h(e,s,i):h(i))||i);return r&&i&&N(e,s,i),i};let p=class extends z{constructor(){super(...arguments),this.selected=!1,this.disabled=!1,this._isVisible=!0}get isVisible(){return this._isVisible}connectedCallback(){super.connectedCallback(),M.instance.apply(this,"gds-segmented"),this.setAttribute("role","listitem")}render(){return W`<button
      aria-current=${String(this.selected)}
      ?disabled="${this.disabled}"
    >
      <slot></slot>
    </button>`}};p.styles=[...P,$(L)];b([u({type:Boolean,reflect:!0})],p.prototype,"selected",2);b([u()],p.prototype,"value",2);b([u({type:Boolean,reflect:!0})],p.prototype,"disabled",2);p=b([C("gds-segment")],p);const R=':host{background-color:var(--gds-sys-color-container-container-dim1);border:.25rem solid var(--gds-sys-color-container-container-dim1);border-radius:calc(infinity * 1px);box-sizing:border-box;contain:layout;display:inline-flex;height:3rem;width:100%;position:relative;overflow:hidden}:host([size="small"]){height:2.5rem}#track{display:flex;flex-grow:1;scroll-snap-type:inline mandatory;overscroll-behavior-x:contain;scroll-behavior:smooth;overflow-x:scroll;gap:.25rem;box-sizing:border-box;position:relative;scrollbar-width:none}#track::-webkit-scrollbar{display:none}#btn-prev,#btn-next{box-sizing:border-box;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;aspect-ratio:1;background-color:var(--gds-sys-color-container-container-dim1);border-radius:calc(infinity * 1px);border-width:0;color:var(--gds-sys-color-content-content);cursor:pointer;display:flex;font-size:1rem;height:100%;justify-content:center;width:2.5rem;transition:.2s;position:relative;z-index:2;position:absolute}@media (pointer: fine){#btn-prev:hover,#btn-next:hover{background-color:color-mix(in srgb,var(--gds-sys-color-state-layers-state-black-dim1),var(--gds-sys-color-container-container-dim1))}}#btn-prev{margin:0 .25rem 0 0}#btn-next{margin:0 0 0 .25rem;right:0}#btn-prev[aria-hidden=true],#btn-next[aria-hidden=true]{opacity:0;width:0;margin:0;padding:0}:host([size="small"]) #btn-prev,:host([size="small"]) #btn-next{width:2rem}::slotted(*){flex-grow:1;flex-shrink:0;z-index:1;scroll-margin:0 2.75rem;scroll-snap-align:start}#indicator{background-color:var(--gds-sys-color-container-container-bright);border-radius:calc(infinity * 1px);height:100%;left:0;position:absolute;transition:transform .2s,width .2s;z-index:0}';var A=Object.defineProperty,X=Object.getOwnPropertyDescriptor,E=t=>{throw TypeError(t)},a=(t,e,s,r)=>{for(var i=r>1?void 0:r?X(e,s):e,l=t.length-1,h;l>=0;l--)(h=t[l])&&(i=(r?h(e,s,i):h(i))||i);return r&&i&&A(e,s,i),i},O=(t,e,s)=>e.has(t)||E("Cannot "+s),n=(t,e,s)=>(O(t,e,"read from private field"),s?s.call(t):e.get(t)),c=(t,e,s)=>e.has(t)?E("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),f=(t,e,s,r)=>(O(t,e,"write to private field"),e.set(t,s),s),F=(t,e,s)=>(O(t,e,"access private method"),s),d,v,I,w,_,y,g,m,x,k;const j=(t,e)=>{let s;return()=>{clearTimeout(s),s=setTimeout(t,e)}};let o=class extends z{constructor(){super(...arguments),c(this,v),this.segMinWidth=100,this.size="medium",c(this,d),this._showPrevButton=!1,this._showNextButton=!1,this.intersectionObserver=null,c(this,w,()=>{this.segments.filter((e,s,r)=>{var i;return((i=r[s+2])==null?void 0:i.isVisible)&&!e.isVisible})[0].scrollIntoView()}),c(this,_,()=>{this.segments.filter((e,s,r)=>{var i;return((i=r[s-2])==null?void 0:i.isVisible)&&!e.isVisible}).reverse()[0].scrollIntoView()}),c(this,y,()=>{this.segments.every(t=>!t.isVisible)||(this._showPrevButton=!this.segments[0].isVisible,this._showNextButton=!this.segments[this.segments.length-1].isVisible)}),c(this,g,j(n(this,y),50)),c(this,m,()=>{const t=this.segments.find(e=>e.selected);if(t){const e=t.offsetWidth,s=t.offsetLeft;this._elIndicator.style.transform=`translateX(${s}px)`,this._elIndicator.style.width=`${e}px`}else this._elIndicator.style.transform="translateX(-100%)",this._elIndicator.style.width="0px"}),c(this,x,t=>{const e=this.segments.find(s=>s===t.target||s.contains(t.target));e&&(this.segments.forEach(s=>s.selected=!1),e.selected=!0,f(this,d,e.value),n(this,m).call(this),this.dispatchEvent(new CustomEvent("change",{detail:{segment:e},bubbles:!0,composed:!0})))}),c(this,k,()=>{n(this,d)&&this.updateComplete.then(()=>{const t=this.segments.find(e=>e.value===n(this,d));t&&(this.segments.forEach(e=>e.selected=!1),t.selected=!0,t.scrollIntoView())})})}get value(){return n(this,d)}set value(t){f(this,d,t),n(this,k).call(this)}get segments(){return this._elSlot?this._elSlot.assignedElements():[]}connectedCallback(){super.connectedCallback(),M.instance.apply(this,"gds-segmented-control"),this.updateComplete.then(()=>{this._elTrack.addEventListener("scroll",()=>{n(this,g).call(this)})})}render(){return W`<button
        aria-hidden=${!this._showPrevButton}
        ?inert=${!this._showPrevButton}
        id="btn-prev"
        @click=${n(this,w)}
        aria-label=${V("Scroll right")}
      >
        <gds-icon-chevron-left />
      </button>
      <div id="track" role="list">
        <slot
          gds-allow="gds-segment"
          @click=${n(this,x)}
          @slotchange=${F(this,v,I)}
          role="none"
        ></slot>
        <div id="indicator" role="none"></div>
      </div>
      <button
        aria-hidden=${!this._showNextButton}
        ?inert=${!this._showNextButton}
        id="btn-next"
        @click=${n(this,_)}
        aria-label=${V("Scroll right")}
      >
        <gds-icon-chevron-right />
      </button>`}_recalculateMinWidth(){this.updateComplete.then(()=>{n(this,g).call(this),n(this,m).call(this)})}};d=new WeakMap;v=new WeakSet;I=function(){var e,s;const t=(e=this.segments.find(r=>r.selected))==null?void 0:e.value;t&&f(this,d,t),(s=this.intersectionObserver)==null||s.disconnect(),this.intersectionObserver=new IntersectionObserver(r=>{r.forEach(i=>{const l=i.target;l._isVisible=i.intersectionRatio>.99})},{root:this._elTrack,threshold:[0,.01,.5,.99,1]}),this.segments.forEach(r=>{var i;(i=this.intersectionObserver)==null||i.observe(r)})};w=new WeakMap;_=new WeakMap;y=new WeakMap;g=new WeakMap;m=new WeakMap;x=new WeakMap;k=new WeakMap;o.styles=[P,$(R)];a([u({type:Number,attribute:"seg-min-width"})],o.prototype,"segMinWidth",2);a([u({reflect:!0})],o.prototype,"size",2);a([u()],o.prototype,"value",1);a([S("slot")],o.prototype,"_elSlot",2);a([S("#indicator")],o.prototype,"_elIndicator",2);a([S("#track")],o.prototype,"_elTrack",2);a([B()],o.prototype,"_showPrevButton",2);a([B()],o.prototype,"_showNextButton",2);a([G(),T("segMinWidth")],o.prototype,"_recalculateMinWidth",1);o=a([C("gds-segmented-control")],o);
