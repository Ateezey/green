import{r as z}from"./lit-element-BoQqPHl6.js";import{n as m,g as B,G as E,h as f,r as P}from"./gds-element-QykLKB9o.js";import{a as $}from"./query-p8xgzTDt.js";import{n as C}from"./when-BxLAFfhK.js";import{m as M}from"./runtime-CMQcyTl6.js";import{T as I}from"./transitional-styles-C6IQsa0n.js";import{w as L}from"./watch-tFciLXSI.js";import{r as D}from"./resize-observer-B9k8v2TZ.js";import{t as T}from"./tokens.style-DuOE18tp.js";import"./chevron-right-BDfeV3uD.js";const U=":host{display:flex;z-index:1}button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border-radius:calc(infinity * 1px);border-width:0;color:var(--gds-sys-color-content-content);cursor:pointer;flex-grow:1;flex-shrink:0;font-family:inherit;font-size:inherit;overflow:hidden;padding:0 1rem;text-align:center;text-overflow:ellipsis;white-space:nowrap;width:100%}button:disabled{cursor:not-allowed;opacity:.5}@media (pointer: fine){button:hover{background-color:color-mix(in srgb,var(--gds-sys-color-state-layers-state-black-dim1),transparent)}button:hover:disabled{background-color:transparent}}button:focus-visible{outline:2px solid #000;outline-offset:-2px}";var A=Object.defineProperty,R=Object.getOwnPropertyDescriptor,v=(e,t,s,n)=>{for(var i=n>1?void 0:n?R(t,s):t,a=e.length-1,d;a>=0;a--)(d=e[a])&&(i=(n?d(t,s,i):d(i))||i);return n&&i&&A(t,s,i),i};let g=class extends E{constructor(){super(...arguments),this.selected=!1,this.disabled=!1,this._isVisible=!0}get isVisible(){return this._isVisible}connectedCallback(){super.connectedCallback(),I.instance.apply(this,"gds-segmented"),this.setAttribute("role","listitem")}render(){return f`<button
      aria-current=${String(this.selected)}
      ?disabled="${this.disabled}"
    >
      <slot></slot>
    </button>`}};g.styles=[...T,z(U)];v([m({type:Boolean,reflect:!0})],g.prototype,"selected",2);v([m()],g.prototype,"value",2);v([m({type:Boolean,reflect:!0})],g.prototype,"disabled",2);g=v([B("gds-segment")],g);const X=':host{background-color:var(--gds-sys-color-container-container-dim1);border:.25rem solid var(--gds-sys-color-container-container-dim1);border-radius:calc(infinity * 1px);box-sizing:border-box;contain:layout;display:inline-flex;gap:.25rem;height:3rem;width:100%;overflow:hidden}:host([size="small"]){height:2.5rem}#track{display:flex;flex-grow:1;scroll-snap-type:inline mandatory;overscroll-behavior-x:contain;scroll-behavior:smooth;overflow-x:scroll;gap:.25rem;box-sizing:border-box;position:relative;scrollbar-width:none}#track::-webkit-scrollbar{display:none}#btn-prev,#btn-next{align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;aspect-ratio:1;background-color:var(--gds-sys-color-container-container-dim1);border-radius:calc(infinity * 1px);border-width:0;color:var(--gds-sys-color-content-content);cursor:pointer;display:flex;font-size:1rem;height:100%;justify-content:center;width:2.5rem}@media (pointer: fine){#btn-prev:hover,#btn-next:hover{background-color:color-mix(in srgb,var(--gds-sys-color-state-layers-state-black-dim1),var(--gds-sys-color-container-container-dim1))}}:host([size="small"]) #btn-prev,:host([size="small"]) #btn-next{width:2rem}::slotted(*){flex-grow:1;flex-shrink:0;z-index:1;scroll-snap-align:start}#indicator{background-color:var(--gds-sys-color-container-container-bright);border-radius:calc(infinity * 1px);height:100%;left:0;position:absolute;transition:transform .2s,width .2s;z-index:0}';var F=Object.defineProperty,Z=Object.getOwnPropertyDescriptor,N=e=>{throw TypeError(e)},l=(e,t,s,n)=>{for(var i=n>1?void 0:n?Z(t,s):t,a=e.length-1,d;a>=0;a--)(d=e[a])&&(i=(n?d(t,s,i):d(i))||i);return n&&i&&F(t,s,i),i},V=(e,t,s)=>t.has(e)||N("Cannot "+s),o=(e,t,s)=>(V(e,t,"read from private field"),s?s.call(e):t.get(e)),c=(e,t,s)=>t.has(e)?N("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),w=(e,t,s,n)=>(V(e,t,"write to private field"),t.set(e,s),s),j=(e,t,s)=>(V(e,t,"access private method"),s),h,u,y,G,x,k,p,b,S,W;const O={small:36,medium:44},_=e=>e?0:4;let r=class extends E{constructor(){super(...arguments),c(this,y),this.segMinWidth=100,this.size="medium",c(this,h),this._showPrevButton=!1,this._showNextButton=!1,this.intersectionObserver=null,c(this,u,()=>{const e=()=>{const t=this.segments.length,s=this._elTrack.offsetWidth;if(s/t>this.segMinWidth)return{count:t,segmentWidth:(s-_(this._isUsingTransitionalStyles)*(t-1))/t};const n=this.offsetWidth-O[this.size]*2,i=Math.floor(n/this.segMinWidth),a=(s-_(this._isUsingTransitionalStyles)*(i-1))/i;return{count:i,calculatedSegmentWidth:a}};o(this,p).call(this),this.updateComplete.then(()=>{const{calculatedSegmentWidth:t,count:s}=e(),n=_(this._isUsingTransitionalStyles);(this._showNextButton||this._showPrevButton)&&this.segments.forEach(i=>{i.style.width=`max(calc((100% / ${s}) - ${n}px / ${s} * (${s} - 1)), ${t}px)`}),o(this,b).call(this)})}),c(this,x,()=>{const e=this.segments.filter((t,s,n)=>{var i;return((i=n[s+1])==null?void 0:i.isVisible)&&!t.isVisible})[0];e._isVisible=!0,o(this,p).call(this),e.scrollIntoView()}),c(this,k,()=>{const e=this.segments.filter((t,s,n)=>{var i;return((i=n[s-1])==null?void 0:i.isVisible)&&!t.isVisible}).reverse()[0];e._isVisible=!0,o(this,p).call(this),e.scrollIntoView()}),c(this,p,()=>{this._showPrevButton=!this.segments[0].isVisible,this._showNextButton=!this.segments[this.segments.length-1].isVisible}),c(this,b,()=>{const e=this.segments.find(t=>t.selected);if(e){const t=this._showPrevButton?O[this.size]:0,s=e.offsetWidth,n=e.offsetLeft-t;this._elIndicator.style.transform=`translateX(${n}px)`,this._elIndicator.style.width=`${s}px`}else this._elIndicator.style.transform="translateX(-100%)",this._elIndicator.style.width="0px"}),c(this,S,e=>{const t=this.segments.find(s=>s===e.target||s.contains(e.target));t&&(this.segments.forEach(s=>s.selected=!1),t.selected=!0,w(this,h,t.value),o(this,b).call(this),this.dispatchEvent(new CustomEvent("change",{detail:{segment:t},bubbles:!0,composed:!0})))}),c(this,W,()=>{o(this,h)&&this.updateComplete.then(()=>{const e=this.segments.find(t=>t.value===o(this,h));e&&(this.segments.forEach(t=>t.selected=!1),e.selected=!0,e.scrollIntoView())})})}get value(){return o(this,h)}set value(e){w(this,h,e),o(this,W).call(this)}get segments(){return this._elSlot?this._elSlot.assignedElements():[]}connectedCallback(){super.connectedCallback(),I.instance.apply(this,"gds-segmented-control")}render(){return f`${C(this._showPrevButton,()=>f`<button
            id="btn-prev"
            @click=${o(this,x)}
            aria-label=${M("Scroll right")}
          >
            <gds-icon-chevron-left />
          </button>`)}
      <div id="track" role="list">
        <slot
          gds-allow="gds-segment"
          @click=${o(this,S)}
          @slotchange=${j(this,y,G)}
          role="none"
        ></slot>
        <div id="indicator" role="none"></div>
      </div>
      ${C(this._showNextButton,()=>f`<button
            id="btn-next"
            @click=${o(this,k)}
            aria-label=${M("Scroll right")}
          >
            <gds-icon-chevron-right />
          </button>`)}`}_recalculateMinWidth(){this.segments.forEach(e=>{e.style.width="auto"}),this.updateComplete.then(()=>o(this,u).call(this))}};h=new WeakMap;u=new WeakMap;y=new WeakSet;G=function(){var t,s;const e=(t=this.segments.find(n=>n.selected))==null?void 0:t.value;e&&w(this,h,e),(s=this.intersectionObserver)==null||s.disconnect(),this.intersectionObserver=new IntersectionObserver(n=>{n.forEach(i=>{const a=i.target;a._isVisible=i.isIntersecting}),o(this,p).call(this),o(this,u).call(this),setTimeout(()=>o(this,u).call(this),1500)},{root:this._elTrack,rootMargin:"0px",threshold:.5}),this.segments.forEach(n=>{var i;(i=this.intersectionObserver)==null||i.observe(n)})};x=new WeakMap;k=new WeakMap;p=new WeakMap;b=new WeakMap;S=new WeakMap;W=new WeakMap;r.styles=[T,z(X)];l([m({type:Number,attribute:"seg-min-width"})],r.prototype,"segMinWidth",2);l([m({reflect:!0})],r.prototype,"size",2);l([m()],r.prototype,"value",1);l([$("slot")],r.prototype,"_elSlot",2);l([$("#indicator")],r.prototype,"_elIndicator",2);l([$("#track")],r.prototype,"_elTrack",2);l([P()],r.prototype,"_showPrevButton",2);l([P()],r.prototype,"_showNextButton",2);l([D(),L("segMinWidth")],r.prototype,"_recalculateMinWidth",1);r=l([B("gds-segmented-control")],r);
